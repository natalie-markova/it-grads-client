import { useState } from 'react'
import { Play, CheckCircle, XCircle, RotateCcw, ArrowRight, Trophy, Target, TrendingUp } from 'lucide-react'
import Section from '../../ui/Section'
import Card from '../../ui/Card'
import { useScrollAnimation } from '../../../hooks/useScrollAnimation'

interface Question {
  id: number
  category: string
  question: string
  options: string[]
  correctAnswer: number
  explanation: string
}

const questions: Question[] = [
  // JavaScript - 10 вопросов
  {
    id: 1,
    category: 'JavaScript',
    question: 'Что такое замыкание (closure) в JavaScript?',
    options: [
      'Функция, которая имеет доступ к переменным внешней области видимости',
      'Способ изоляции переменных',
      'Метод оптимизации кода',
      'Тип данных в JavaScript',
    ],
    correctAnswer: 0,
    explanation: 'Замыкание - это функция, которая имеет доступ к переменным внешней (охватывающей) области видимости, даже после того, как внешняя функция завершила выполнение.',
  },
  {
    id: 2,
    category: 'JavaScript',
    question: 'Что выведет console.log(typeof null)?',
    options: ['null', 'undefined', 'object', 'boolean'],
    correctAnswer: 2,
    explanation: 'Это известная особенность JavaScript - typeof null возвращает "object", хотя null является примитивным значением. Это баг, который сохраняется для обратной совместимости.',
  },
  {
    id: 3,
    category: 'JavaScript',
    question: 'Что такое hoisting в JavaScript?',
    options: [
      'Перемещение объявлений переменных и функций наверх области видимости',
      'Оптимизация кода браузером',
      'Способ создания функций',
      'Метод работы с DOM',
    ],
    correctAnswer: 0,
    explanation: 'Hoisting - это механизм JavaScript, при котором объявления переменных и функций перемещаются в начало их области видимости на этапе компиляции.',
  },
  {
    id: 4,
    category: 'JavaScript',
    question: 'Какая разница между let и var?',
    options: [
      'let имеет блочную область видимости, var - функциональную',
      'Нет разницы',
      'var быстрее let',
      'let можно переопределять, var нельзя',
    ],
    correctAnswer: 0,
    explanation: 'let имеет блочную область видимости (внутри {}), в то время как var имеет функциональную область видимости. Также let не поднимается (hoist) так же, как var.',
  },
  {
    id: 5,
    category: 'JavaScript',
    question: 'Что такое Promise в JavaScript?',
    options: [
      'Объект, представляющий результат асинхронной операции',
      'Тип данных для хранения чисел',
      'Метод для работы с DOM',
      'Способ объявления переменных',
    ],
    correctAnswer: 0,
    explanation: 'Promise - это объект, который представляет завершение (или неудачу) асинхронной операции и её результирующее значение.',
  },
  {
    id: 6,
    category: 'JavaScript',
    question: 'Что делает метод Array.prototype.map()?',
    options: [
      'Создаёт новый массив с результатами вызова функции для каждого элемента',
      'Фильтрует элементы массива',
      'Сортирует массив',
      'Находит элемент в массиве',
    ],
    correctAnswer: 0,
    explanation: 'Метод map() создаёт новый массив с результатами вызова указанной функции для каждого элемента исходного массива.',
  },
  {
    id: 7,
    category: 'JavaScript',
    question: 'Что такое Event Loop в JavaScript?',
    options: [
      'Механизм обработки асинхронных операций',
      'Цикл для перебора массивов',
      'Событие клика мыши',
      'Тип данных',
    ],
    correctAnswer: 0,
    explanation: 'Event Loop - это механизм, который позволяет JavaScript выполнять асинхронные операции, несмотря на то, что JS однопоточный.',
  },
  {
    id: 8,
    category: 'JavaScript',
    question: 'Что такое деструктуризация в JavaScript?',
    options: [
      'Извлечение значений из массивов или объектов в отдельные переменные',
      'Удаление элементов из массива',
      'Создание копии объекта',
      'Метод сортировки',
    ],
    correctAnswer: 0,
    explanation: 'Деструктуризация позволяет извлекать значения из массивов или свойства из объектов и присваивать их отдельным переменным.',
  },
  {
    id: 9,
    category: 'JavaScript',
    question: 'Что такое стрелочные функции?',
    options: [
      'Краткий синтаксис для функций без собственного this',
      'Функции для работы с массивами',
      'Устаревший способ объявления функций',
      'Функции, которые возвращают стрелки',
    ],
    correctAnswer: 0,
    explanation: 'Стрелочные функции - это краткий синтаксис для написания функций. Они не имеют собственного this и используют this из окружающего контекста.',
  },
  {
    id: 10,
    category: 'JavaScript',
    question: 'Что такое spread оператор (...)?',
    options: [
      'Разворачивает массив или объект в отдельные элементы',
      'Создаёт массив из элементов',
      'Удаляет элементы из массива',
      'Сравнивает два массива',
    ],
    correctAnswer: 0,
    explanation: 'Spread оператор (...) позволяет развернуть итерируемый объект (массив, строку) в местах, где ожидается ноль или более аргументов или элементов.',
  },

  // React - 10 вопросов
  {
    id: 11,
    category: 'React',
    question: 'В чем разница между useState и useReducer?',
    options: [
      'useState для простого состояния, useReducer для сложной логики',
      'useState быстрее, чем useReducer',
      'useReducer только для массивов',
      'Нет разницы',
    ],
    correctAnswer: 0,
    explanation: 'useState подходит для простого локального состояния, а useReducer лучше использовать когда логика обновления состояния сложная или когда следующее состояние зависит от предыдущего.',
  },
  {
    id: 12,
    category: 'React',
    question: 'Что такое виртуальный DOM?',
    options: [
      'Легковесная копия реального DOM в памяти',
      'Способ рендеринга на сервере',
      'Тип компонента React',
      'Метод оптимизации CSS',
    ],
    correctAnswer: 0,
    explanation: 'Виртуальный DOM - это легковесная копия реального DOM, хранящаяся в памяти. React использует его для эффективного обновления только измененных частей реального DOM.',
  },
  {
    id: 13,
    category: 'React',
    question: 'Что такое useEffect?',
    options: [
      'Хук для выполнения побочных эффектов в компонентах',
      'Метод для создания компонентов',
      'Способ стилизации компонентов',
      'Инструмент для тестирования',
    ],
    correctAnswer: 0,
    explanation: 'useEffect - это хук, который позволяет выполнять побочные эффекты в функциональных компонентах: запросы к API, подписки, изменение DOM и т.д.',
  },
  {
    id: 14,
    category: 'React',
    question: 'Что такое props в React?',
    options: [
      'Данные, передаваемые от родительского компонента к дочернему',
      'Внутреннее состояние компонента',
      'Стили компонента',
      'Методы жизненного цикла',
    ],
    correctAnswer: 0,
    explanation: 'Props (properties) - это механизм передачи данных от родительского компонента к дочернему. Props неизменяемы внутри компонента.',
  },
  {
    id: 15,
    category: 'React',
    question: 'Что такое JSX?',
    options: [
      'Синтаксическое расширение JavaScript для описания UI',
      'Библиотека для работы с формами',
      'Фреймворк для тестирования',
      'Система сборки',
    ],
    correctAnswer: 0,
    explanation: 'JSX - это синтаксическое расширение JavaScript, которое позволяет писать HTML-подобный код внутри JavaScript для описания UI.',
  },
  {
    id: 16,
    category: 'React',
    question: 'Зачем нужен key в списках React?',
    options: [
      'Для идентификации элементов при обновлении списка',
      'Для стилизации элементов',
      'Для сортировки списка',
      'Для доступа к элементам по индексу',
    ],
    correctAnswer: 0,
    explanation: 'Key помогает React идентифицировать элементы, которые изменились, добавились или удалились. Это повышает производительность при обновлении списков.',
  },
  {
    id: 17,
    category: 'React',
    question: 'Что такое React Context?',
    options: [
      'Способ передачи данных через дерево компонентов без props',
      'Метод для работы с формами',
      'Хук для работы с состоянием',
      'Библиотека маршрутизации',
    ],
    correctAnswer: 0,
    explanation: 'Context предоставляет способ передачи данных через дерево компонентов без необходимости передавать props на каждом уровне вручную.',
  },
  {
    id: 18,
    category: 'React',
    question: 'Что такое useMemo?',
    options: [
      'Хук для мемоизации вычисляемых значений',
      'Хук для управления состоянием',
      'Метод для создания компонентов',
      'Инструмент для отладки',
    ],
    correctAnswer: 0,
    explanation: 'useMemo - это хук, который мемоизирует результат вычисления и пересчитывает его только при изменении зависимостей. Используется для оптимизации производительности.',
  },
  {
    id: 19,
    category: 'React',
    question: 'Что такое useCallback?',
    options: [
      'Хук для мемоизации функций',
      'Хук для обработки ошибок',
      'Метод для создания событий',
      'Инструмент для работы с API',
    ],
    correctAnswer: 0,
    explanation: 'useCallback - это хук, который возвращает мемоизированную версию колбэк-функции, которая изменяется только при изменении зависимостей.',
  },
  {
    id: 20,
    category: 'React',
    question: 'Что такое React.memo?',
    options: [
      'HOC для предотвращения ненужных перерендеров компонента',
      'Хук для работы с памятью',
      'Метод для создания заметок',
      'Инструмент для логирования',
    ],
    correctAnswer: 0,
    explanation: 'React.memo - это компонент высшего порядка (HOC), который предотвращает ненужные перерендеры компонента, если его props не изменились.',
  },

  // Алгоритмы - 10 вопросов
  {
    id: 21,
    category: 'Алгоритмы',
    question: 'Какая временная сложность у бинарного поиска?',
    options: ['O(n)', 'O(log n)', 'O(n log n)', 'O(1)'],
    correctAnswer: 1,
    explanation: 'Бинарный поиск имеет временную сложность O(log n), так как на каждой итерации мы уменьшаем область поиска вдвое.',
  },
  {
    id: 22,
    category: 'Алгоритмы',
    question: 'Какая структура данных используется для реализации очереди (queue)?',
    options: ['Стек', 'Массив', 'Связанный список', 'Дерево'],
    correctAnswer: 2,
    explanation: 'Очередь обычно реализуется с помощью связанного списка, так как добавление и удаление элементов происходит за O(1) на обоих концах.',
  },
  {
    id: 23,
    category: 'Алгоритмы',
    question: 'Что такое Big O нотация?',
    options: [
      'Способ описания временной или пространственной сложности алгоритма',
      'Название алгоритма сортировки',
      'Тип структуры данных',
      'Метод оптимизации кода',
    ],
    correctAnswer: 0,
    explanation: 'Big O нотация используется для описания верхней границы временной или пространственной сложности алгоритма при увеличении размера входных данных.',
  },
  {
    id: 24,
    category: 'Алгоритмы',
    question: 'Какая временная сложность у bubble sort в худшем случае?',
    options: ['O(n)', 'O(log n)', 'O(n²)', 'O(n log n)'],
    correctAnswer: 2,
    explanation: 'Bubble sort имеет временную сложность O(n²) в худшем случае, так как для каждого элемента нужно пройти весь массив.',
  },
  {
    id: 25,
    category: 'Алгоритмы',
    question: 'Что такое хеш-таблица?',
    options: [
      'Структура данных с O(1) доступом по ключу',
      'Отсортированный массив',
      'Тип дерева',
      'Метод сортировки',
    ],
    correctAnswer: 0,
    explanation: 'Хеш-таблица - это структура данных, которая обеспечивает в среднем O(1) время для операций вставки, удаления и поиска по ключу.',
  },
  {
    id: 26,
    category: 'Алгоритмы',
    question: 'Что такое рекурсия?',
    options: [
      'Вызов функцией самой себя',
      'Цикл for',
      'Сортировка массива',
      'Поиск в массиве',
    ],
    correctAnswer: 0,
    explanation: 'Рекурсия - это подход, при котором функция вызывает сама себя для решения подзадач. Требует базовый случай для завершения.',
  },
  {
    id: 27,
    category: 'Алгоритмы',
    question: 'Какая временная сложность у quick sort в среднем?',
    options: ['O(n)', 'O(log n)', 'O(n²)', 'O(n log n)'],
    correctAnswer: 3,
    explanation: 'Quick sort имеет среднюю временную сложность O(n log n), что делает его одним из самых эффективных алгоритмов сортировки.',
  },
  {
    id: 28,
    category: 'Алгоритмы',
    question: 'Что такое стек (stack)?',
    options: [
      'Структура данных LIFO (последний вошёл - первый вышел)',
      'Структура данных FIFO',
      'Тип массива',
      'Метод сортировки',
    ],
    correctAnswer: 0,
    explanation: 'Стек - это структура данных, работающая по принципу LIFO (Last In, First Out). Последний добавленный элемент извлекается первым.',
  },
  {
    id: 29,
    category: 'Алгоритмы',
    question: 'Что такое граф в программировании?',
    options: [
      'Структура данных из вершин и рёбер',
      'Визуальное представление данных',
      'Тип массива',
      'Метод сортировки',
    ],
    correctAnswer: 0,
    explanation: 'Граф - это структура данных, состоящая из вершин (узлов) и рёбер (связей между узлами). Используется для моделирования связей между объектами.',
  },
  {
    id: 30,
    category: 'Алгоритмы',
    question: 'Что такое динамическое программирование?',
    options: [
      'Метод решения задач путём разбиения на подзадачи с мемоизацией',
      'Программирование на динамических языках',
      'Создание анимаций',
      'Работа с базами данных',
    ],
    correctAnswer: 0,
    explanation: 'Динамическое программирование - это метод решения сложных задач путём разбиения их на более простые подзадачи с сохранением результатов для избежания повторных вычислений.',
  },

  // Базы данных - 10 вопросов
  {
    id: 31,
    category: 'Базы данных',
    question: 'Что такое нормализация базы данных?',
    options: [
      'Процесс организации данных для уменьшения избыточности',
      'Увеличение производительности запросов',
      'Создание резервных копий',
      'Шифрование данных',
    ],
    correctAnswer: 0,
    explanation: 'Нормализация - это процесс организации данных в базе данных для уменьшения избыточности и улучшения целостности данных.',
  },
  {
    id: 32,
    category: 'Базы данных',
    question: 'Что такое ACID в контексте транзакций?',
    options: [
      'Atomicity, Consistency, Isolation, Durability',
      'Метод индексации',
      'Тип базы данных',
      'Язык запросов',
    ],
    correctAnswer: 0,
    explanation: 'ACID - это набор свойств транзакций: Atomicity (атомарность), Consistency (согласованность), Isolation (изоляция), Durability (долговечность).',
  },
  {
    id: 33,
    category: 'Базы данных',
    question: 'Что такое SQL?',
    options: [
      'Язык структурированных запросов для работы с БД',
      'Тип базы данных',
      'Протокол передачи данных',
      'Формат хранения файлов',
    ],
    correctAnswer: 0,
    explanation: 'SQL (Structured Query Language) - это язык для управления и манипулирования данными в реляционных базах данных.',
  },
  {
    id: 34,
    category: 'Базы данных',
    question: 'Что такое первичный ключ (Primary Key)?',
    options: [
      'Уникальный идентификатор записи в таблице',
      'Пароль для доступа к БД',
      'Тип данных',
      'Метод шифрования',
    ],
    correctAnswer: 0,
    explanation: 'Первичный ключ - это столбец или набор столбцов, которые уникально идентифицируют каждую запись в таблице базы данных.',
  },
  {
    id: 35,
    category: 'Базы данных',
    question: 'Что такое индекс в базе данных?',
    options: [
      'Структура для ускорения поиска данных',
      'Тип таблицы',
      'Метод резервного копирования',
      'Способ шифрования',
    ],
    correctAnswer: 0,
    explanation: 'Индекс - это структура данных, которая повышает скорость операций поиска в базе данных за счёт дополнительного места для хранения.',
  },
  {
    id: 36,
    category: 'Базы данных',
    question: 'Что такое JOIN в SQL?',
    options: [
      'Операция объединения данных из нескольких таблиц',
      'Создание новой таблицы',
      'Удаление данных',
      'Сортировка результатов',
    ],
    correctAnswer: 0,
    explanation: 'JOIN - это операция SQL, которая позволяет объединять строки из двух или более таблиц на основе связанных между ними столбцов.',
  },
  {
    id: 37,
    category: 'Базы данных',
    question: 'Что такое NoSQL база данных?',
    options: [
      'Нереляционная БД для хранения неструктурированных данных',
      'Новая версия SQL',
      'База данных без запросов',
      'Метод шифрования данных',
    ],
    correctAnswer: 0,
    explanation: 'NoSQL - это нереляционные базы данных, которые хранят данные в формате, отличном от табличного (документы, графы, ключ-значение и т.д.).',
  },
  {
    id: 38,
    category: 'Базы данных',
    question: 'Что такое внешний ключ (Foreign Key)?',
    options: [
      'Столбец, ссылающийся на первичный ключ другой таблицы',
      'Ключ для внешнего доступа',
      'Пароль администратора',
      'Тип индекса',
    ],
    correctAnswer: 0,
    explanation: 'Внешний ключ - это столбец, который ссылается на первичный ключ другой таблицы, обеспечивая связь между таблицами.',
  },
  {
    id: 39,
    category: 'Базы данных',
    question: 'Что такое транзакция в базе данных?',
    options: [
      'Последовательность операций, выполняемых как единое целое',
      'Перевод денег',
      'Создание резервной копии',
      'Тип запроса',
    ],
    correctAnswer: 0,
    explanation: 'Транзакция - это последовательность операций с базой данных, которые выполняются как единое целое. Либо все операции выполняются успешно, либо ни одна.',
  },
  {
    id: 40,
    category: 'Базы данных',
    question: 'Что такое денормализация?',
    options: [
      'Добавление избыточности для повышения производительности',
      'Удаление дубликатов',
      'Шифрование данных',
      'Создание индексов',
    ],
    correctAnswer: 0,
    explanation: 'Денормализация - это намеренное добавление избыточности в базу данных для повышения производительности чтения за счёт уменьшения количества JOIN-операций.',
  },

  // Системный дизайн - 10 вопросов
  {
    id: 41,
    category: 'Системный дизайн',
    question: 'Что такое горизонтальное масштабирование?',
    options: [
      'Добавление большего количества серверов',
      'Увеличение мощности существующих серверов',
      'Оптимизация кода',
      'Сжатие данных',
    ],
    correctAnswer: 0,
    explanation: 'Горизонтальное масштабирование (scaling out) - это добавление большего количества серверов для обработки нагрузки, в отличие от вертикального масштабирования (scaling up), которое увеличивает мощность существующих серверов.',
  },
  {
    id: 42,
    category: 'Системный дизайн',
    question: 'Что такое кэширование?',
    options: [
      'Хранение часто используемых данных в быстродоступном месте',
      'Удаление старых данных',
      'Шифрование информации',
      'Сжатие файлов',
    ],
    correctAnswer: 0,
    explanation: 'Кэширование - это техника хранения копии данных в быстродоступном месте для ускорения последующих запросов к этим данным.',
  },
  {
    id: 43,
    category: 'Системный дизайн',
    question: 'Что такое микросервисная архитектура?',
    options: [
      'Разделение приложения на независимые сервисы',
      'Маленькое приложение',
      'Оптимизация кода',
      'Тип базы данных',
    ],
    correctAnswer: 0,
    explanation: 'Микросервисная архитектура - это подход, при котором приложение разделяется на небольшие независимые сервисы, каждый из которых выполняет одну функцию.',
  },
  {
    id: 44,
    category: 'Системный дизайн',
    question: 'Что такое Load Balancer?',
    options: [
      'Распределитель нагрузки между серверами',
      'Инструмент для тестирования',
      'Тип базы данных',
      'Метод шифрования',
    ],
    correctAnswer: 0,
    explanation: 'Load Balancer (балансировщик нагрузки) распределяет входящие запросы между несколькими серверами для обеспечения высокой доступности и производительности.',
  },
  {
    id: 45,
    category: 'Системный дизайн',
    question: 'Что такое CDN?',
    options: [
      'Сеть доставки контента для ускорения загрузки',
      'Тип протокола',
      'База данных',
      'Метод шифрования',
    ],
    correctAnswer: 0,
    explanation: 'CDN (Content Delivery Network) - это сеть серверов, распределённых географически, для быстрой доставки контента пользователям из ближайшего сервера.',
  },
  {
    id: 46,
    category: 'Системный дизайн',
    question: 'Что такое API Gateway?',
    options: [
      'Единая точка входа для всех API запросов',
      'Тип базы данных',
      'Метод аутентификации',
      'Протокол передачи данных',
    ],
    correctAnswer: 0,
    explanation: 'API Gateway - это сервер, который служит единой точкой входа для всех клиентских запросов, маршрутизируя их к соответствующим микросервисам.',
  },
  {
    id: 47,
    category: 'Системный дизайн',
    question: 'Что такое CAP теорема?',
    options: [
      'Невозможность одновременно гарантировать Consistency, Availability, Partition tolerance',
      'Метод шифрования',
      'Протокол передачи данных',
      'Тип базы данных',
    ],
    correctAnswer: 0,
    explanation: 'CAP теорема утверждает, что распределённая система не может одновременно гарантировать согласованность (Consistency), доступность (Availability) и устойчивость к разделению (Partition tolerance).',
  },
  {
    id: 48,
    category: 'Системный дизайн',
    question: 'Что такое очередь сообщений (Message Queue)?',
    options: [
      'Асинхронный способ обмена сообщениями между сервисами',
      'Чат между пользователями',
      'Тип базы данных',
      'Метод логирования',
    ],
    correctAnswer: 0,
    explanation: 'Message Queue - это механизм асинхронного обмена сообщениями между компонентами системы, обеспечивающий надёжную доставку и развязку сервисов.',
  },
  {
    id: 49,
    category: 'Системный дизайн',
    question: 'Что такое репликация базы данных?',
    options: [
      'Создание копий данных на нескольких серверах',
      'Сжатие данных',
      'Шифрование информации',
      'Удаление дубликатов',
    ],
    correctAnswer: 0,
    explanation: 'Репликация - это процесс копирования данных на несколько серверов для обеспечения высокой доступности, отказоустойчивости и повышения производительности чтения.',
  },
  {
    id: 50,
    category: 'Системный дизайн',
    question: 'Что такое шардирование (sharding)?',
    options: [
      'Разделение данных на части между несколькими серверами',
      'Сжатие данных',
      'Шифрование информации',
      'Резервное копирование',
    ],
    correctAnswer: 0,
    explanation: 'Шардирование - это метод горизонтального масштабирования, при котором данные распределяются между несколькими серверами (шардами) для повышения производительности.',
  },

  // TypeScript - 10 вопросов
  {
    id: 51,
    category: 'TypeScript',
    question: 'Что такое TypeScript?',
    options: [
      'Надмножество JavaScript с добавлением статической типизации',
      'Новый язык программирования',
      'Библиотека для JavaScript',
      'Фреймворк для создания сайтов',
    ],
    correctAnswer: 0,
    explanation: 'TypeScript - это язык программирования, являющийся надмножеством JavaScript с добавлением статической типизации и других возможностей.',
  },
  {
    id: 52,
    category: 'TypeScript',
    question: 'Что такое interface в TypeScript?',
    options: [
      'Способ описания структуры объекта',
      'Функция для работы с типами',
      'Метод оптимизации кода',
      'Альтернатива классам',
    ],
    correctAnswer: 0,
    explanation: 'Interface в TypeScript - это способ описания структуры объекта, определяющий какие свойства и методы должен иметь объект.',
  },
  {
    id: 53,
    category: 'TypeScript',
    question: 'В чём разница между interface и type?',
    options: [
      'interface можно расширять, type поддерживает union типы',
      'Нет разницы',
      'type быстрее',
      'interface устарел',
    ],
    correctAnswer: 0,
    explanation: 'Interface можно расширять через extends и объединять объявления. Type поддерживает union и intersection типы, примитивы и кортежи.',
  },
  {
    id: 54,
    category: 'TypeScript',
    question: 'Что такое generic в TypeScript?',
    options: [
      'Параметризованный тип для создания переиспользуемого кода',
      'Специальный тип данных',
      'Метод оптимизации',
      'Способ импорта модулей',
    ],
    correctAnswer: 0,
    explanation: 'Generic - это параметризованный тип, который позволяет создавать компоненты, работающие с различными типами данных, сохраняя типобезопасность.',
  },
  {
    id: 55,
    category: 'TypeScript',
    question: 'Что означает тип "any" в TypeScript?',
    options: [
      'Любой тип, отключает проверку типов',
      'Тип для чисел',
      'Тип для массивов',
      'Тип для объектов',
    ],
    correctAnswer: 0,
    explanation: 'Тип any отключает проверку типов для переменной. Использовать его следует осторожно, так как теряется преимущество типизации.',
  },
  {
    id: 56,
    category: 'TypeScript',
    question: 'Что такое enum в TypeScript?',
    options: [
      'Набор именованных констант',
      'Тип массива',
      'Способ создания функций',
      'Метод обработки ошибок',
    ],
    correctAnswer: 0,
    explanation: 'Enum (перечисление) - это способ задать набор именованных констант, что делает код более читаемым и поддерживаемым.',
  },
  {
    id: 57,
    category: 'TypeScript',
    question: 'Что такое union type?',
    options: [
      'Тип, который может быть одним из нескольких типов',
      'Объединение массивов',
      'Слияние объектов',
      'Способ наследования',
    ],
    correctAnswer: 0,
    explanation: 'Union type (объединённый тип) позволяет переменной быть одним из нескольких типов. Записывается через символ |, например: string | number.',
  },
  {
    id: 58,
    category: 'TypeScript',
    question: 'Что такое type guard?',
    options: [
      'Проверка типа во время выполнения для сужения типа',
      'Защита от ошибок компиляции',
      'Способ шифрования типов',
      'Метод оптимизации',
    ],
    correctAnswer: 0,
    explanation: 'Type guard - это выражение, которое проверяет тип во время выполнения и позволяет TypeScript сузить тип переменной в определённом блоке кода.',
  },
  {
    id: 59,
    category: 'TypeScript',
    question: 'Что такое "never" тип?',
    options: [
      'Тип для функций, которые никогда не возвращают значение',
      'Пустой тип',
      'Тип для null',
      'Альтернатива undefined',
    ],
    correctAnswer: 0,
    explanation: 'Тип never используется для функций, которые никогда не возвращают значение (бросают исключение или содержат бесконечный цикл).',
  },
  {
    id: 60,
    category: 'TypeScript',
    question: 'Что такое "readonly" модификатор?',
    options: [
      'Делает свойство доступным только для чтения',
      'Скрывает свойство',
      'Делает свойство обязательным',
      'Удаляет свойство',
    ],
    correctAnswer: 0,
    explanation: 'Модификатор readonly делает свойство доступным только для чтения. После инициализации его значение нельзя изменить.',
  },

  // Node.js - 10 вопросов
  {
    id: 61,
    category: 'Node.js',
    question: 'Что такое Node.js?',
    options: [
      'Среда выполнения JavaScript на сервере',
      'Фреймворк для frontend',
      'База данных',
      'Язык программирования',
    ],
    correctAnswer: 0,
    explanation: 'Node.js - это среда выполнения JavaScript, построенная на движке V8 от Chrome, позволяющая запускать JavaScript на сервере.',
  },
  {
    id: 62,
    category: 'Node.js',
    question: 'Что такое npm?',
    options: [
      'Пакетный менеджер для Node.js',
      'Сервер для Node.js',
      'База данных',
      'Фреймворк',
    ],
    correctAnswer: 0,
    explanation: 'npm (Node Package Manager) - это пакетный менеджер для JavaScript, позволяющий устанавливать, обновлять и управлять зависимостями проекта.',
  },
  {
    id: 63,
    category: 'Node.js',
    question: 'Что такое package.json?',
    options: [
      'Файл с метаданными и зависимостями проекта',
      'Конфигурация сервера',
      'Файл с переменными окружения',
      'Лог-файл',
    ],
    correctAnswer: 0,
    explanation: 'package.json - это файл, содержащий метаданные проекта (название, версия, скрипты) и список зависимостей.',
  },
  {
    id: 64,
    category: 'Node.js',
    question: 'Что такое Express.js?',
    options: [
      'Минималистичный веб-фреймворк для Node.js',
      'База данных',
      'Шаблонизатор',
      'ORM для Node.js',
    ],
    correctAnswer: 0,
    explanation: 'Express.js - это минималистичный и гибкий веб-фреймворк для Node.js, предоставляющий набор функций для создания веб-приложений и API.',
  },
  {
    id: 65,
    category: 'Node.js',
    question: 'Что такое middleware в Express?',
    options: [
      'Функция, обрабатывающая запрос между получением и ответом',
      'База данных',
      'Шаблон проектирования',
      'Метод маршрутизации',
    ],
    correctAnswer: 0,
    explanation: 'Middleware - это функции, которые имеют доступ к объектам запроса и ответа и могут выполнять код, изменять запрос/ответ или завершать цикл обработки.',
  },
  {
    id: 66,
    category: 'Node.js',
    question: 'Что такое модуль fs в Node.js?',
    options: [
      'Модуль для работы с файловой системой',
      'Модуль для работы с сетью',
      'Модуль для шифрования',
      'Модуль для тестирования',
    ],
    correctAnswer: 0,
    explanation: 'Модуль fs (file system) предоставляет API для взаимодействия с файловой системой: чтение, запись, удаление файлов и директорий.',
  },
  {
    id: 67,
    category: 'Node.js',
    question: 'Что такое process.env?',
    options: [
      'Объект с переменными окружения',
      'Информация о процессоре',
      'Список запущенных процессов',
      'Конфигурация памяти',
    ],
    correctAnswer: 0,
    explanation: 'process.env - это объект, содержащий переменные окружения. Используется для хранения конфигурации (API ключи, настройки БД и т.д.).',
  },
  {
    id: 68,
    category: 'Node.js',
    question: 'Что такое callback hell?',
    options: [
      'Глубокая вложенность колбэков, ухудшающая читаемость',
      'Ошибка в коде',
      'Тип атаки',
      'Метод оптимизации',
    ],
    correctAnswer: 0,
    explanation: 'Callback hell - это анти-паттерн с глубокой вложенностью колбэков, делающий код трудночитаемым. Решается через Promises или async/await.',
  },
  {
    id: 69,
    category: 'Node.js',
    question: 'Что такое Buffer в Node.js?',
    options: [
      'Класс для работы с бинарными данными',
      'Тип массива',
      'Метод кэширования',
      'Способ логирования',
    ],
    correctAnswer: 0,
    explanation: 'Buffer - это класс для работы с бинарными данными напрямую. Используется при работе с потоками, файлами и сетевыми операциями.',
  },
  {
    id: 70,
    category: 'Node.js',
    question: 'Что такое cluster в Node.js?',
    options: [
      'Модуль для создания дочерних процессов для многоядерных систем',
      'Тип базы данных',
      'Метод кэширования',
      'Способ логирования',
    ],
    correctAnswer: 0,
    explanation: 'Модуль cluster позволяет создавать дочерние процессы (workers), которые разделяют один серверный порт, используя все ядра процессора.',
  },

  // CSS - 10 вопросов
  {
    id: 71,
    category: 'CSS',
    question: 'Что такое Flexbox?',
    options: [
      'Модель разметки для создания гибких макетов',
      'CSS фреймворк',
      'Препроцессор CSS',
      'JavaScript библиотека',
    ],
    correctAnswer: 0,
    explanation: 'Flexbox - это модель CSS-разметки, предназначенная для создания гибких и адаптивных макетов с удобным выравниванием элементов.',
  },
  {
    id: 72,
    category: 'CSS',
    question: 'Что такое CSS Grid?',
    options: [
      'Двумерная система разметки для создания сложных макетов',
      'Таблица в CSS',
      'Фреймворк',
      'Метод анимации',
    ],
    correctAnswer: 0,
    explanation: 'CSS Grid - это двумерная система разметки, позволяющая создавать сложные макеты с строками и столбцами одновременно.',
  },
  {
    id: 73,
    category: 'CSS',
    question: 'Что такое специфичность (specificity) в CSS?',
    options: [
      'Приоритет применения стилей на основе селекторов',
      'Скорость загрузки стилей',
      'Размер CSS файла',
      'Количество правил',
    ],
    correctAnswer: 0,
    explanation: 'Специфичность определяет, какие CSS правила применяются к элементу при конфликте. Рассчитывается на основе типа селекторов.',
  },
  {
    id: 74,
    category: 'CSS',
    question: 'Что такое псевдокласс :hover?',
    options: [
      'Применяет стили при наведении курсора на элемент',
      'Скрывает элемент',
      'Добавляет анимацию',
      'Изменяет позицию элемента',
    ],
    correctAnswer: 0,
    explanation: 'Псевдокласс :hover применяет стили к элементу, когда пользователь наводит на него курсор мыши.',
  },
  {
    id: 75,
    category: 'CSS',
    question: 'Что такое box-sizing: border-box?',
    options: [
      'Включает padding и border в общую ширину/высоту элемента',
      'Добавляет рамку элементу',
      'Скрывает границы',
      'Изменяет тип элемента',
    ],
    correctAnswer: 0,
    explanation: 'box-sizing: border-box включает padding и border в указанную ширину и высоту элемента, упрощая расчёт размеров.',
  },
  {
    id: 76,
    category: 'CSS',
    question: 'Что такое z-index?',
    options: [
      'Свойство, определяющее порядок наложения элементов',
      'Размер элемента',
      'Прозрачность',
      'Позиция по оси X',
    ],
    correctAnswer: 0,
    explanation: 'z-index определяет порядок наложения позиционированных элементов. Элементы с большим z-index отображаются поверх элементов с меньшим.',
  },
  {
    id: 77,
    category: 'CSS',
    question: 'Что такое media queries?',
    options: [
      'Правила для применения стилей в зависимости от характеристик устройства',
      'Запросы к серверу',
      'Метод загрузки изображений',
      'Способ анимации',
    ],
    correctAnswer: 0,
    explanation: 'Media queries позволяют применять разные CSS стили в зависимости от характеристик устройства (ширина экрана, ориентация и т.д.).',
  },
  {
    id: 78,
    category: 'CSS',
    question: 'Что такое CSS переменные (custom properties)?',
    options: [
      'Пользовательские значения, которые можно переиспользовать',
      'Стандартные значения CSS',
      'JavaScript переменные в CSS',
      'Препроцессорные функции',
    ],
    correctAnswer: 0,
    explanation: 'CSS переменные (--custom-property) позволяют определять значения для переиспользования в CSS, упрощая поддержку и изменение стилей.',
  },
  {
    id: 79,
    category: 'CSS',
    question: 'В чём разница между margin и padding?',
    options: [
      'margin - внешний отступ, padding - внутренний',
      'Нет разницы',
      'margin больше padding',
      'padding только для блочных элементов',
    ],
    correctAnswer: 0,
    explanation: 'Margin - это внешний отступ (пространство снаружи элемента), padding - внутренний отступ (пространство между содержимым и границей элемента).',
  },
  {
    id: 80,
    category: 'CSS',
    question: 'Что такое position: absolute?',
    options: [
      'Позиционирует элемент относительно ближайшего позиционированного предка',
      'Фиксирует элемент на экране',
      'Размещает элемент в потоке',
      'Скрывает элемент',
    ],
    correctAnswer: 0,
    explanation: 'position: absolute позиционирует элемент относительно ближайшего позиционированного предка (не static). Элемент удаляется из нормального потока документа.',
  },

  // Git - 10 вопросов
  {
    id: 81,
    category: 'Git',
    question: 'Что такое Git?',
    options: [
      'Распределённая система контроля версий',
      'Язык программирования',
      'База данных',
      'Веб-сервер',
    ],
    correctAnswer: 0,
    explanation: 'Git - это распределённая система контроля версий, которая отслеживает изменения в файлах и позволяет координировать работу над проектом.',
  },
  {
    id: 82,
    category: 'Git',
    question: 'Что делает команда git clone?',
    options: [
      'Копирует удалённый репозиторий на локальную машину',
      'Создаёт новую ветку',
      'Удаляет репозиторий',
      'Сохраняет изменения',
    ],
    correctAnswer: 0,
    explanation: 'git clone создаёт копию удалённого репозитория на вашем компьютере, включая всю историю коммитов.',
  },
  {
    id: 83,
    category: 'Git',
    question: 'Что делает команда git commit?',
    options: [
      'Сохраняет изменения в локальном репозитории',
      'Отправляет изменения на сервер',
      'Скачивает изменения',
      'Удаляет файлы',
    ],
    correctAnswer: 0,
    explanation: 'git commit сохраняет проиндексированные (staged) изменения в локальном репозитории с сообщением о коммите.',
  },
  {
    id: 84,
    category: 'Git',
    question: 'В чём разница между git fetch и git pull?',
    options: [
      'fetch скачивает изменения, pull скачивает и сливает',
      'Нет разницы',
      'pull быстрее',
      'fetch устарел',
    ],
    correctAnswer: 0,
    explanation: 'git fetch скачивает изменения из удалённого репозитория без слияния. git pull - это fetch + merge, он сразу сливает изменения в текущую ветку.',
  },
  {
    id: 85,
    category: 'Git',
    question: 'Что такое git branch?',
    options: [
      'Команда для создания и управления ветками',
      'Команда для удаления файлов',
      'Команда для просмотра истории',
      'Команда для слияния',
    ],
    correctAnswer: 0,
    explanation: 'git branch позволяет создавать, просматривать, переименовывать и удалять ветки в репозитории.',
  },
  {
    id: 86,
    category: 'Git',
    question: 'Что делает git merge?',
    options: [
      'Объединяет две ветки',
      'Удаляет ветку',
      'Создаёт новый коммит',
      'Отменяет изменения',
    ],
    correctAnswer: 0,
    explanation: 'git merge объединяет историю указанной ветки с текущей веткой, создавая коммит слияния при необходимости.',
  },
  {
    id: 87,
    category: 'Git',
    question: 'Что такое git rebase?',
    options: [
      'Перемещает коммиты на новую базу',
      'Удаляет коммиты',
      'Создаёт резервную копию',
      'Отменяет слияние',
    ],
    correctAnswer: 0,
    explanation: 'git rebase перемещает или объединяет последовательность коммитов на новую базу. Создаёт линейную историю коммитов.',
  },
  {
    id: 88,
    category: 'Git',
    question: 'Что такое .gitignore?',
    options: [
      'Файл со списком игнорируемых файлов и папок',
      'Скрытая папка Git',
      'Конфигурация Git',
      'Лог-файл',
    ],
    correctAnswer: 0,
    explanation: '.gitignore - это файл, содержащий паттерны файлов и папок, которые Git должен игнорировать (не отслеживать).',
  },
  {
    id: 89,
    category: 'Git',
    question: 'Что делает git stash?',
    options: [
      'Временно сохраняет незакоммиченные изменения',
      'Удаляет изменения',
      'Создаёт коммит',
      'Переключает ветку',
    ],
    correctAnswer: 0,
    explanation: 'git stash временно сохраняет незакоммиченные изменения, позволяя переключиться на другую задачу и вернуться к ним позже.',
  },
  {
    id: 90,
    category: 'Git',
    question: 'Что такое pull request (merge request)?',
    options: [
      'Запрос на слияние изменений из одной ветки в другую',
      'Запрос на скачивание кода',
      'Запрос на удаление ветки',
      'Запрос на создание репозитория',
    ],
    correctAnswer: 0,
    explanation: 'Pull request - это запрос на слияние изменений из одной ветки в другую, обычно с возможностью code review перед слиянием.',
  },
]

// Функция для перемешивания массива (Fisher-Yates shuffle)
const shuffleArray = <T,>(array: T[]): T[] => {
  const shuffled = [...array]
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]]
  }
  return shuffled
}

const Interview = () => {
  useScrollAnimation()
  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0)
  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null)
  const [showExplanation, setShowExplanation] = useState(false)
  const [score, setScore] = useState(0)
  const [isStarted, setIsStarted] = useState(false)
  const [isFinished, setIsFinished] = useState(false)
  const [answeredQuestions, setAnsweredQuestions] = useState<Set<number>>(new Set())
  const [category, setCategory] = useState<string>('')
  const [userAnswers, setUserAnswers] = useState<{questionId: number, correct: boolean}[]>([])
  const [shuffledQuestions, setShuffledQuestions] = useState<Question[]>([])

  const categories = Array.from(new Set(questions.map(q => q.category)))
  const currentQuestion = shuffledQuestions[currentQuestionIndex]

  const handleStart = () => {
    if (!category) return
    // Перемешиваем вопросы выбранной категории при каждом старте
    const categoryQuestions = questions.filter(q => q.category === category)
    setShuffledQuestions(shuffleArray(categoryQuestions))
    setIsStarted(true)
    setIsFinished(false)
    setCurrentQuestionIndex(0)
    setScore(0)
    setAnsweredQuestions(new Set())
    setSelectedAnswer(null)
    setShowExplanation(false)
    setUserAnswers([])
  }

  const handleAnswer = (answerIndex: number) => {
    if (showExplanation) return

    setSelectedAnswer(answerIndex)
    setShowExplanation(true)

    const isCorrect = answerIndex === currentQuestion.correctAnswer
    if (isCorrect) {
      setScore(score + 1)
    }

    setAnsweredQuestions(new Set([...answeredQuestions, currentQuestion.id]))
    setUserAnswers([...userAnswers, { questionId: currentQuestion.id, correct: isCorrect }])
  }

  const handleNext = () => {
    if (currentQuestionIndex < shuffledQuestions.length - 1) {
      setCurrentQuestionIndex(currentQuestionIndex + 1)
      setSelectedAnswer(null)
      setShowExplanation(false)
    } else {
      // Тест завершён - показываем результаты
      setIsFinished(true)
    }
  }

  const handleReset = () => {
    setIsStarted(false)
    setIsFinished(false)
    setCurrentQuestionIndex(0)
    setSelectedAnswer(null)
    setShowExplanation(false)
    setScore(0)
    setAnsweredQuestions(new Set())
    setCategory('')
    setUserAnswers([])
  }

  const getResultComment = (percentage: number) => {
    if (percentage >= 90) {
      return {
        title: 'Превосходно!',
        message: 'Вы отлично разбираетесь в этой теме. Ваши знания на высоком уровне, вы готовы к реальному собеседованию!',
        color: 'text-green-400',
        bgColor: 'bg-green-500/20',
        borderColor: 'border-green-500/30'
      }
    } else if (percentage >= 70) {
      return {
        title: 'Хороший результат!',
        message: 'У вас хорошая база знаний. Рекомендуем повторить темы, где были ошибки, чтобы укрепить понимание.',
        color: 'text-blue-400',
        bgColor: 'bg-blue-500/20',
        borderColor: 'border-blue-500/30'
      }
    } else if (percentage >= 50) {
      return {
        title: 'Неплохо, но есть куда расти',
        message: 'Вы знаете основы, но некоторые темы требуют дополнительного изучения. Советуем повторить материал и попробовать снова.',
        color: 'text-yellow-400',
        bgColor: 'bg-yellow-500/20',
        borderColor: 'border-yellow-500/30'
      }
    } else {
      return {
        title: 'Нужно подучить материал',
        message: 'Не расстраивайтесь! Это отличная возможность выявить пробелы в знаниях. Рекомендуем изучить теорию и вернуться к тесту позже.',
        color: 'text-orange-400',
        bgColor: 'bg-orange-500/20',
        borderColor: 'border-orange-500/30'
      }
    }
  }

  // Экран результатов
  if (isFinished) {
    const percentage = Math.round((score / shuffledQuestions.length) * 100)
    const result = getResultComment(percentage)

    return (
      <div className="bg-dark-bg min-h-screen py-8">
        <Section
          title="Результаты теста"
          subtitle={`Категория: ${category}`}
          className="bg-dark-bg py-0"
        >
          <Card className="max-w-3xl mx-auto" hover={false}>
            {/* Основной результат */}
            <div className="text-center mb-8">
              <div className="w-24 h-24 mx-auto mb-6 rounded-full bg-accent-cyan/20 flex items-center justify-center">
                <Trophy className="w-12 h-12 text-accent-cyan" />
              </div>
              <h2 className="text-3xl font-bold text-white mb-2">
                {score} из {shuffledQuestions.length}
              </h2>
              <p className="text-5xl font-bold text-accent-cyan mb-4">
                {percentage}%
              </p>
            </div>

            {/* Комментарий к результату */}
            <div className={`p-6 rounded-xl ${result.bgColor} border ${result.borderColor} mb-8`}>
              <h3 className={`text-xl font-bold ${result.color} mb-2 flex items-center gap-2`}>
                <Target className="w-5 h-5" />
                {result.title}
              </h3>
              <p className="text-gray-300 leading-relaxed">
                {result.message}
              </p>
            </div>

            {/* Статистика */}
            <div className="grid grid-cols-2 gap-4 mb-8">
              <div className="bg-dark-surface rounded-xl p-4 text-center">
                <div className="flex items-center justify-center gap-2 mb-2">
                  <CheckCircle className="w-5 h-5 text-green-500" />
                  <span className="text-2xl font-bold text-green-500">{score}</span>
                </div>
                <p className="text-gray-400 text-sm">Правильных ответов</p>
              </div>
              <div className="bg-dark-surface rounded-xl p-4 text-center">
                <div className="flex items-center justify-center gap-2 mb-2">
                  <XCircle className="w-5 h-5 text-red-500" />
                  <span className="text-2xl font-bold text-red-500">{shuffledQuestions.length - score}</span>
                </div>
                <p className="text-gray-400 text-sm">Неправильных ответов</p>
              </div>
            </div>

            {/* Рекомендации */}
            <div className="bg-dark-surface rounded-xl p-6 mb-8">
              <h4 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                <TrendingUp className="w-5 h-5 text-accent-cyan" />
                Рекомендации для улучшения
              </h4>
              <ul className="space-y-2 text-gray-300">
                {percentage < 70 && (
                  <li className="flex items-start gap-2">
                    <span className="text-accent-cyan">•</span>
                    <span>Повторите основы {category} по документации</span>
                  </li>
                )}
                <li className="flex items-start gap-2">
                  <span className="text-accent-cyan">•</span>
                  <span>Практикуйтесь с реальными задачами</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-accent-cyan">•</span>
                  <span>Попробуйте пройти тест ещё раз через некоторое время</span>
                </li>
              </ul>
            </div>

            {/* Кнопки действий */}
            <div className="flex flex-col sm:flex-row gap-4">
              <button
                onClick={handleReset}
                className="btn-secondary flex-1 flex items-center justify-center gap-2"
              >
                <RotateCcw className="h-4 w-4" />
                Выбрать другую категорию
              </button>
              <button
                onClick={() => {
                  setIsFinished(false)
                  setIsStarted(false)
                  setCurrentQuestionIndex(0)
                  setScore(0)
                  setAnsweredQuestions(new Set())
                  setSelectedAnswer(null)
                  setShowExplanation(false)
                  setUserAnswers([])
                }}
                className="btn-primary flex-1 flex items-center justify-center gap-2"
              >
                <Play className="h-4 w-4" />
                Пройти тест снова
              </button>
            </div>
          </Card>
        </Section>
      </div>
    )
  }

  if (!isStarted) {
    return (
      <div className="bg-dark-bg min-h-screen py-8">
        <Section
          title="Практика с вопросами"
          subtitle="Выберите одну категорию и ответьте на 10 вопросов"
          className="bg-dark-bg py-0"
        >
          <Card className="max-w-3xl mx-auto" hover={false}>
            <div className="text-center mb-8">
              <h3 className="text-2xl font-bold text-white mb-6">Выберите категорию</h3>
              <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                {categories.map((cat) => {
                  const catQuestions = questions.filter(q => q.category === cat)
                  return (
                    <button
                      key={cat}
                      onClick={() => setCategory(cat)}
                      className={`px-4 py-4 rounded-lg font-medium transition-all ${
                        category === cat
                          ? 'bg-accent-cyan text-dark-bg ring-2 ring-accent-cyan ring-offset-2 ring-offset-dark-bg'
                          : 'bg-dark-surface text-white hover:bg-dark-card'
                      }`}
                    >
                      <div className="text-lg">{cat}</div>
                      <div className={`text-sm mt-1 ${category === cat ? 'text-dark-bg/70' : 'text-gray-400'}`}>
                        {catQuestions.length} вопросов
                      </div>
                    </button>
                  )
                })}
              </div>
              {category && (
                <p className="text-gray-300 mb-6">
                  Выбрана категория: <span className="text-accent-cyan font-semibold">{category}</span> (10 вопросов)
                </p>
              )}
              <button
                onClick={handleStart}
                disabled={!category}
                className={`btn-primary inline-flex items-center gap-2 ${!category ? 'opacity-50 cursor-not-allowed' : ''}`}
              >
                <Play className="h-5 w-5" />
                Начать тест
              </button>
            </div>
          </Card>
        </Section>
      </div>
    )
  }

  const progress = ((currentQuestionIndex + 1) / shuffledQuestions.length) * 100

  return (
    <div className="bg-dark-bg min-h-screen py-8">
      <Section
        title="Практика с вопросами"
        subtitle={`${category} • Вопрос ${currentQuestionIndex + 1} из ${shuffledQuestions.length}`}
        className="bg-dark-bg py-0"
      >
        <Card className="max-w-3xl mx-auto" hover={false}>
          {/* Progress Bar */}
          <div className="mb-6">
            <div className="flex justify-between items-center mb-2">
              <span className="text-sm text-gray-300">
                Прогресс: {currentQuestionIndex + 1} / {shuffledQuestions.length}
              </span>
              <span className="text-sm text-gray-300">
                Правильных: {score} / {answeredQuestions.size}
              </span>
            </div>
            <div className="w-full bg-dark-surface rounded-full h-2">
              <div
                className="bg-accent-cyan h-2 rounded-full transition-all duration-300"
                style={{ width: `${progress}%` }}
              />
            </div>
          </div>

          {/* Question */}
          <div className="mb-6">
            <h3 className="text-2xl font-bold text-white mb-6">
              {currentQuestion.question}
            </h3>

            {/* Answers */}
            <div className="space-y-3">
              {currentQuestion.options.map((option, index) => {
                const isSelected = selectedAnswer === index
                const isCorrect = index === currentQuestion.correctAnswer
                const showResult = showExplanation

                return (
                  <button
                    key={index}
                    onClick={() => handleAnswer(index)}
                    disabled={showExplanation}
                    className={`w-full text-left p-4 rounded-lg border-2 transition-all ${
                      showResult
                        ? isCorrect
                          ? 'bg-green-500/20 border-green-500 text-white'
                          : isSelected
                          ? 'bg-red-500/20 border-red-500 text-white'
                          : 'bg-dark-surface border-dark-card text-gray-300'
                        : 'bg-dark-surface border-dark-card text-gray-300 hover:border-accent-cyan hover:bg-dark-card'
                    } ${showExplanation ? 'cursor-default' : 'cursor-pointer'}`}
                  >
                    <div className="flex items-center justify-between">
                      <span>{option}</span>
                      {showResult && isCorrect && (
                        <CheckCircle className="h-5 w-5 text-green-500" />
                      )}
                      {showResult && isSelected && !isCorrect && (
                        <XCircle className="h-5 w-5 text-red-500" />
                      )}
                    </div>
                  </button>
                )
              })}
            </div>

            {/* Explanation */}
            {showExplanation && (
              <div className="mt-6 p-4 bg-dark-surface rounded-lg border border-accent-cyan/30">
                <h4 className="text-lg font-semibold text-white mb-2">Объяснение:</h4>
                <p className="text-gray-300 leading-relaxed">{currentQuestion.explanation}</p>
              </div>
            )}
          </div>

          {/* Navigation */}
          <div className="flex justify-between items-center pt-6 border-t border-dark-surface">
            <button
              onClick={handleReset}
              className="btn-secondary flex items-center gap-2"
            >
              <RotateCcw className="h-4 w-4" />
              Выйти
            </button>
            <button
              onClick={handleNext}
              disabled={!showExplanation}
              className="btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {currentQuestionIndex < shuffledQuestions.length - 1 ? (
                <>
                  Следующий вопрос
                  <ArrowRight className="h-4 w-4" />
                </>
              ) : (
                <>
                  Завершить тест
                  <Trophy className="h-4 w-4" />
                </>
              )}
            </button>
          </div>
        </Card>
      </Section>
    </div>
  )
}

export default Interview